<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Speed Guitar Trainer</title>
    <style>
        body {

            background-color: rgb(37, 36, 36);
        }

        .botao {

            width: 100px;
            height: 50px;
            border-radius: 5px;
            font-size: 30px;
            font-family: Arial, Helvetica, sans-serif;
            cursor: pointer;

        }

        #inicio {

            position: absolute;
            left: 400px;
            top: 380px;
            background-color: chartreuse;
        }

        #fim {

            position: absolute;
            background-color: crimson;
            left: 550px;
            top: 380px;
        }

        #limpar {

            position: absolute;
            background-color: rgb(128, 114, 117);
            left: 700px;
            top: 380px;
        }

        #speed {

            position: absolute;
            top: 450px;
            left: 450px;
            background-color: darkblue;
        }

        #speedTxt {

            color: whitesmoke;
            font-size: 30px;
            font-family: Arial, Helvetica, sans-serif;
            position: absolute;
            top: 480px;
            left: 480px;
        }

        #inicioTxt {

            color: chartreuse;
            font-size: 30px;
            font-family: Arial, Helvetica, sans-serif;
            position: absolute;
            top: 520px;
            left: 480px;

        }

        #video {

            border-radius: 20px;
            position: absolute;
            left: 300px;

        }

        #fimTxt {

            color: crimson;
            font-size: 30px;
            font-family: Arial, Helvetica, sans-serif;
            position: absolute;
            top: 560px;
            left: 480px;
        }

        #pdf {

            width: 55%;
            position: absolute;
            top: 0;
            height: 1000px;
        }

        #salvar {

            font-size: 20px;
            font-family: Arial, Helvetica, sans-serif;
            color: white;


        }

        #inputFrase1Inicio {

            width: 30px;
        }

        #inputFrase1Final {

            width: 30px;
        }
    </style>
</head>

<body>

    <video id='video' src="andy.mp4" controls></video>

    <div id='salvar'>Salvar Frases</div>
    <button id='frase1'>Frase 1</button>
    <input id='inputFrase1Inicio' type="text" placeholder="início">
    <input id='inputFrase1Final' type="text" placeholder="final">
    <button id='salvarBtn'>Salvar</button>


    <abbr title="Clique aqui no momento exato para indicar onde o loop começará. Atalho de teclado: A"><button
            class="botao" id='inicio'>Início</button></abbr>
    <abbr title="Clique aqui no momento exato para indicar onde o loop terminará. Atalho de teclado: B"><button
            class="botao" id='fim'>Fim</button></abbr>
    <abbr title="Limpar os marcos de início e fim de loop. Atalho de teclado: C"><button class="botao"
            id='limpar'>Limpar</button></abbr>
    <input id='speed' min='1' max='120' type="range" value='100'>
    <div id='speedTxt'>Speed:</div>
    <div id=inicioTxt>Início: </div>
    <div id='fimTxt'>Fim: </div>

</body>
<script>




    let video = document.getElementById('video')
    let inicioBt = document.getElementById('inicio')
    let fimBt = document.getElementById('fim')
    let limpar = document.getElementById('limpar')
    let inicio = 0
    let fim
    let speedTxt = document.getElementById('speedTxt')
    let inicioTxt = document.getElementById('inicioTxt')
    let fimTxt = document.getElementById('fimTxt')
    let speed = document.getElementById('speed')
    let frase1 = document.getElementById('frase1')

    let frase1Inicio = document.getElementById('inputFrase1Inicio').value
    let frase1Final = document.getElementById('inputFrase1Final').value

    let salvarBtn = document.getElementById('salvarBtn')

    // salvarBtn.onclick = salvar()

    frase1.onclick = function () {

        inicio = localStorage.getItem('frase1Inicio')
        fim = localStorage.getItem('frase1Final')
        inicioTxt.innerHTML = 'Início: ' + parseInt(inicio) + 's'
        fimTxt.innerHTML = 'Fim: ' + parseInt(fim) + 's'
        
        video.play()
        video.currentTime = inicio
        
        

    }



    salvarBtn.onclick = function () {

        frase1Inicio = document.getElementById('inputFrase1Inicio').value
        frase1Final = document.getElementById('inputFrase1Final').value

        localStorage.setItem('frase1Inicio', frase1Inicio)
        localStorage.setItem('frase1Final', frase1Final)


        console.log('salvo')
        console.log(frase1Inicio)
        console.log(frase1Final)


    }








    video.currentTime = inicio

    limpar.onclick = function () {

        //window.location.reload()
        inicio = video.currentTime
        fim = video.duration
        inicioTxt.innerHTML = 'Início:'
        fimTxt.innerHTML = 'Fim: '
        

    }

    inicioBt.onclick = function () {

        console.log('Início do trecho: ' + video.currentTime)
        inicio = video.currentTime
        inicioTxt.innerHTML = 'Início: ' + parseInt(inicio) + 's'
        


    }

    fimBt.onclick = function () {

        console.log('Início do trecho: ' + video.currentTime)
        fim = video.currentTime
        fimTxt.innerHTML = 'Fim: ' + parseInt(fim) + 's'
        



    }

    setInterval(() => {



        console.log('Velocidade: ' + speed.value)

        video.playbackRate = speed.value / 100
        localStorage.setItem('speed', video.playbackRate)
        speedTxt.innerHTML = 'Speed: ' + speed.value + '%'

        document.addEventListener('keypress', function (e) {

            if (e.key == 'a') {

                console.log('Início do trecho: ' + parseInt(video.currentTime))
                inicio = parseInt(video.currentTime)
                inicioTxt.innerHTML = 'Início: ' + inicio + 's'
                localStorage.setItem('inicio', inicio)


            } else if (e.key == 'b') {

                console.log('Fim do trecho: ' + parseInt(video.currentTime))
                fim = parseInt(video.currentTime)
                fimTxt.innerHTML = 'Fim: ' + fim + 's'
                localStorage.setItem('fim', fim)


            } else if (e.key == 'c') {

                inicio = video.currentTime
                fim = video.duration
                inicioTxt.innerHTML = 'Início:'
                fimTxt.innerHTML = 'Fim: '
                localStorage.setItem('inicio', 0)
                localStorage.setItem('fim', video.duration)


            }

        })

        if (video.currentTime >= fim) {

            video.currentTime = inicio


        }

    }, 100);




</script>

</html>